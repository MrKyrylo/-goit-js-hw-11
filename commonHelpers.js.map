{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// import { renderMarkup } from './js/render-functions';\n// import { fetchImages } from './js/pixabay-api';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  nav: true,\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 150,\n});\n\nconst form = document.querySelector('.js-search-form');\nconst container = document.querySelector('.gallery');\nlet searchWord = '';\n\nconsole.log(form);\n\nform.addEventListener('submit', onSubmit);\n\nfunction onSubmit(event) {\n  event.preventDefault();\n\n  container.innerHTML = '';\n  searchWord = form.elements.query.value.trim();\n\n  fetchImages(searchWord)\n    .then(data => {\n      const markup = renderMarkup(data);\n      container.insertAdjacentHTML('beforeend', markup);\n\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.error('Error:', error);\n    });\n  form.reset();\n}\n\nconst KEY = '41952140-5e618661129c37e138516e154';\nconst URL = 'https://pixabay.com/api/';\nconst loader = document.querySelector('.loader');\n\nfunction fetchImages(searchWord) {\n  const searchParamObj = {\n    key: KEY,\n    q: searchWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const searchParams = new URLSearchParams(searchParamObj);\n\n  loader.style.display = 'block';\n\n  return fetch(`${URL}?${searchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`Error! Status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(data => {\n      loader.style.display = 'none';\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n          timeout: 3000,\n          position: 'topRight',\n          message:\n            'There are no images matching your search query. Please, enter something else!',\n        });\n      }\n      return data;\n    })\n    .catch(error => {\n      console.error('Error fetching data!', error);\n    });\n}\n\nfunction renderMarkup(data) {\n  return data.hits\n    .map(\n      el =>\n        `<div class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n            </a>\n            <div class=\"gallery-item-info\">\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Likes: <span>${el.likes}</span>\n                    </span>    \n                </p>\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Views: <span>${el.views}</span>\n                    </span>    \n                </p>\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Comments: <span>${el.comments}</span>\n                    </span>    \n                </p>\n                <p class=\"gallery-item-info-par\">\n                    <span class=\"gallery-item-info-span\">Downloads: <span>${el.downloads}</span>\n                    </span>    \n                </p>\n            </div>\n        </div>`\n    )\n    .join('');\n}"],"names":["lightbox","SimpleLightbox","form","container","searchWord","onSubmit","event","fetchImages","data","markup","renderMarkup","error","KEY","URL","loader","searchParamObj","searchParams","response","iziToast","el"],"mappings":"6vBAQA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAChD,IAAK,GACL,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAY,SAAS,cAAc,UAAU,EACnD,IAAIC,EAAa,GAEjB,QAAQ,IAAIF,CAAI,EAEhBA,EAAK,iBAAiB,SAAUG,CAAQ,EAExC,SAASA,EAASC,EAAO,CACvBA,EAAM,eAAc,EAEpBH,EAAU,UAAY,GACtBC,EAAaF,EAAK,SAAS,MAAM,MAAM,KAAI,EAE3CK,EAAYH,CAAU,EACnB,KAAKI,GAAQ,CACZ,MAAMC,EAASC,EAAaF,CAAI,EAChCL,EAAU,mBAAmB,YAAaM,CAAM,EAEhDT,EAAS,QAAO,CACtB,CAAK,EACA,MAAMW,GAAS,CACd,QAAQ,MAAM,SAAUA,CAAK,CACnC,CAAK,EACHT,EAAK,MAAK,CACZ,CAEA,MAAMU,EAAM,qCACNC,EAAM,2BACNC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASP,EAAYH,EAAY,CAC/B,MAAMW,EAAiB,CACrB,IAAKH,EACL,EAAGR,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EACQY,EAAe,IAAI,gBAAgBD,CAAc,EAEvD,OAAAD,EAAO,MAAM,QAAU,QAEhB,MAAM,GAAGD,CAAG,IAAIG,CAAY,EAAE,EAClC,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,kBAAkBA,EAAS,MAAM,EAAE,EAErD,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKT,IACJM,EAAO,MAAM,QAAU,OAEnBN,EAAK,KAAK,SAAW,GACvBU,EAAS,MAAM,CACb,QAAS,IACT,SAAU,WACV,QACE,+EACZ,CAAS,EAEIV,EACR,EACA,MAAMG,GAAS,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CACjD,CAAK,CACL,CAEA,SAASD,EAAaF,EAAM,CAC1B,OAAOA,EAAK,KACT,IACCW,GACE;AAAA,4CACoCA,EAAG,aAAa;AAAA,kDACVA,EAAG,YAAY,UAAUA,EAAG,IAAI;AAAA;AAAA;AAAA;AAAA,wEAIVA,EAAG,KAAK;AAAA;AAAA;AAAA;AAAA,wEAIRA,EAAG,KAAK;AAAA;AAAA;AAAA;AAAA,2EAILA,EAAG,QAAQ;AAAA;AAAA;AAAA;AAAA,4EAIVA,EAAG,SAAS;AAAA;AAAA;AAAA;AAAA,eAKnF,EACA,KAAK,EAAE,CACZ"}